# Icon Generation Problem Diagnosis

## Issue
Icons are generating as complex luxury scenes instead of simple, flat UI icons despite having correct master_prompt_icons.txt.

## Current Flow
1. **YAML Sync** → Creates prompts and stores in page_data['prompt']
2. **OpenRouter Orchestrator** → Enhances prompts using master_prompt_icons.txt 
3. **Replicate API** → Receives enhanced prompt and generates image

## Problem Location
The issue appears to be that the prompts are being enhanced with luxury/complex descriptions BEFORE they reach the master_prompt_icons.txt processing.

## Evidence
- **master_prompt_icons.txt** exists and is correct (simple, flat icons)
- **OpenRouter** correctly loads master_prompt_icons.txt for icon types
- **Generated icons** are complex scenes (offices, control panels, certificates)

## Root Cause Hypothesis
The prompts generated by YAML sync are already too complex/luxurious, and even though master_prompt_icons.txt tries to simplify them, the AI models are still influenced by the initial complex prompt.

## Solution Plan

### Option 1: Fix at YAML Sync Level
- Modify ultra_premium_yaml_sync.py to generate SIMPLE prompts for icons
- Keep luxury prompts only for covers

### Option 2: Override Prompts for Icons
- When asset_type == 'icons', completely replace the prompt with a simple version
- Ignore the luxury prompt from YAML sync

### Option 3: Direct Replicate Model Instruction
- Add negative prompts to Replicate API call for icons
- Explicitly tell model: "NO complex scenes, NO backgrounds, ONLY simple flat icon"

## Recommended Fix
**Option 2** - Override prompts completely when generating icons. The luxury prompts are fundamentally incompatible with simple icon generation.

## Test Plan
1. Modify asset_generator.py to override icon prompts
2. Test with 3 sample icons
3. Verify they are simple, flat UI icons
4. Apply fix to all icon generation