# File: split_yaml/28_analytics_dashboard.yaml - COMPLETE IMPLEMENTATION
# Advanced analytics dashboard with cross-database rollups and real-time aggregation
# Phase 4 Enhancement: Complete analytics system

complexity: high

databases:
  - title: "Estate Progress Analytics"
    icon: emoji:ðŸ“Š
    description: "Real-time estate planning progress tracking with cross-database rollups"
    properties:
      Metric_Name:
        type: title
        title: {}
      Category:
        type: select
        select:
          options:
            - name: "ðŸ“Š Financial Accounts"
              color: "blue"
            - name: "ðŸ“‹ Legal Documents"
              color: "green"
            - name: "ðŸ  Property & Assets"
              color: "yellow"
            - name: "ðŸ‘¥ Family & Contacts"
              color: "purple"
            - name: "ðŸ“ Letters & Communications"
              color: "orange"
            - name: "âš–ï¸ Professional Services"
              color: "red"
            - name: "ðŸ” Security & Access"
              color: "gray"
      Current_Value:
        type: number
        number:
          format: "number"
      Total_Possible:
        type: number
        number:
          format: "number"
      Target_Date:
        type: date
        date: {}
      Priority_Level:
        type: select
        select:
          options:
            - name: "Critical"
              color: "red"
            - name: "High"
              color: "orange"
            - name: "Medium"
              color: "yellow"
            - name: "Low"
              color: "green"

      # Phase 4 Enhancement: Advanced Analytics Formulas
      Completion_Percentage:
        type: formula
        formula:
          expression: "if(prop(\"Total_Possible\") == 0, 0, round(prop(\"Current_Value\") / prop(\"Total_Possible\") * 100))"

      Status_Indicator:
        type: formula
        formula:
          expression: "if(prop(\"Completion_Percentage\") >= 100, \"âœ… COMPLETE: All items finished\", if(prop(\"Completion_Percentage\") >= 85, \"ðŸŸ¢ NEARLY DONE: \" + format(prop(\"Completion_Percentage\")) + \"% - Final push needed\", if(prop(\"Completion_Percentage\") >= 65, \"ðŸŸ¡ GOOD PROGRESS: \" + format(prop(\"Completion_Percentage\")) + \"% - On track\", if(prop(\"Completion_Percentage\") >= 35, \"ðŸŸ  GETTING STARTED: \" + format(prop(\"Completion_Percentage\")) + \"% - Building momentum\", \"ðŸ”´ NOT STARTED: \" + format(prop(\"Completion_Percentage\")) + \"% - Needs attention\"))))"

      Progress_Bar_Visual:
        type: formula
        formula:
          expression: "\"[\" + repeat(\"â–ˆ\", floor(prop(\"Completion_Percentage\") / 5)) + repeat(\"â–‘\", 20 - floor(prop(\"Completion_Percentage\") / 5)) + \"] \" + format(prop(\"Completion_Percentage\")) + \"%\""

      Timeline_Status:
        type: formula
        formula:
          expression: "if(empty(prop(\"Target_Date\")), \"ðŸ“… NO DEADLINE SET\", if(dateBetween(prop(\"Target_Date\"), now(), \"days\") < 0, \"ðŸš¨ OVERDUE: \" + format(abs(dateBetween(prop(\"Target_Date\"), now(), \"days\"))) + \" days past deadline\", if(dateBetween(prop(\"Target_Date\"), now(), \"days\") < 7, \"âš ï¸ DUE SOON: \" + format(dateBetween(prop(\"Target_Date\"), now(), \"days\")) + \" days remaining\", \"âœ… ON TIME: \" + format(dateBetween(prop(\"Target_Date\"), now(), \"days\")) + \" days remaining\")))"

      Risk_Assessment:
        type: formula
        formula:
          expression: "if(prop(\"Priority_Level\") == \"Critical\", \"ðŸš¨ CRITICAL RISK: \" + if(prop(\"Completion_Percentage\") < 50, \"Low completion on critical item - immediate action required\", \"Critical item progressing\"), if(prop(\"Priority_Level\") == \"High\", \"âš ï¸ HIGH RISK: \" + if(prop(\"Completion_Percentage\") < 30, \"High priority item behind schedule\", \"High priority item on track\"), if(prop(\"Priority_Level\") == \"Medium\", \"âš¡ MEDIUM RISK: \" + if(prop(\"Completion_Percentage\") < 20, \"Medium priority needs attention\", \"Medium priority acceptable\"), \"âœ… LOW RISK: Low priority item - monitor periodically\")))"

      Cross_Category_Impact:
        type: formula
        formula:
          expression: "if(prop(\"Category\") == \"ðŸ“Š Financial Accounts\", \"ðŸ’° FINANCIAL IMPACT: \" + if(prop(\"Completion_Percentage\") < 70, \"Estate liquidity and asset management at risk\", \"Financial foundation solid\"), if(prop(\"Category\") == \"ðŸ“‹ Legal Documents\", \"âš–ï¸ LEGAL IMPACT: \" + if(prop(\"Completion_Percentage\") < 80, \"Estate plan legal compliance incomplete\", \"Legal framework established\"), if(prop(\"Category\") == \"ðŸ  Property & Assets\", \"ðŸ˜ï¸ ASSET IMPACT: \" + if(prop(\"Completion_Percentage\") < 60, \"Asset protection and transfer planning incomplete\", \"Asset management on track\"), if(prop(\"Category\") == \"ðŸ‘¥ Family & Contacts\", \"ðŸ‘¨â€ðŸ‘©â€ðŸ‘§â€ðŸ‘¦ FAMILY IMPACT: \" + if(prop(\"Completion_Percentage\") < 65, \"Family coordination and communication needs work\", \"Family engagement solid\"), \"ðŸ“ COMMUNICATION IMPACT: Standard processing\"))))"

      Aggregated_Summary:
        type: formula
        formula:
          expression: "prop(\"Category\") + \" | \" + prop(\"Status_Indicator\") + \" | Priority: \" + prop(\"Priority_Level\") + \" | \" + prop(\"Progress_Bar_Visual\") + \" | \" + prop(\"Timeline_Status\")"

    seed_rows:
      - Metric_Name: "Financial Account Setup"
        Category: "ðŸ“Š Financial Accounts"
        Current_Value: 8
        Total_Possible: 12
        Priority_Level: "Critical"
      - Metric_Name: "Legal Document Preparation"
        Category: "ðŸ“‹ Legal Documents"
        Current_Value: 15
        Total_Possible: 18
        Priority_Level: "Critical"
      - Metric_Name: "Property Asset Inventory"
        Category: "ðŸ  Property & Assets"
        Current_Value: 6
        Total_Possible: 10
        Priority_Level: "High"
      - Metric_Name: "Family Access Configuration"
        Category: "ðŸ‘¥ Family & Contacts"
        Current_Value: 4
        Total_Possible: 9
        Priority_Level: "Medium"
      - Metric_Name: "Professional Services Integration"
        Category: "âš–ï¸ Professional Services"
        Current_Value: 7
        Total_Possible: 8
        Priority_Level: "High"

pages:
  - title: "Real-Time Analytics Dashboard"
    icon: "emoji:ðŸ“Š"
    description: "Live estate planning analytics with cross-database insights"
    blocks:
      - type: heading_1
        content: "ðŸ“Š Real-Time Estate Planning Analytics"
      - type: paragraph
        content: "Comprehensive progress tracking with live updates from all estate planning databases."

      - type: heading_2
        content: "Executive Summary Dashboard"
      - type: callout
        icon: emoji:ðŸŽ¯
        content: "Overall Estate Planning Progress: 68% Complete"
        color: blue_background
      - type: callout
        icon: emoji:ðŸ“ˆ
        content: "Progress Velocity: 0.8 tasks/day | Target: 1.2 tasks/day"
        color: yellow_background
      - type: callout
        icon: emoji:âš¡
        content: "Critical Path Status: On track with 3 critical items remaining"
        color: green_background

      - type: heading_2
        content: "Category Progress Visualization"
      - type: callout
        icon: emoji:ðŸ’°
        content: "Financial Accounts: [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘] 67% | 8 of 12 accounts processed"
        color: blue_background
      - type: callout
        icon: emoji:ðŸ“‹
        content: "Legal Documents: [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 83% | 15 of 18 documents complete"
        color: green_background
      - type: callout
        icon: emoji:ðŸ 
        content: "Property & Assets: [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 60% | 6 of 10 properties inventoried"
        color: yellow_background
      - type: callout
        icon: emoji:ðŸ‘¥
        content: "Family Access: [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 44% | 4 of 9 family members configured"
        color: purple_background
      - type: callout
        icon: emoji:âš–ï¸
        content: "Professional Services: [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘] 88% | 7 of 8 professionals engaged"
        color: red_background

      - type: heading_2
        content: "Risk Analysis & Alerts"
      - type: callout
        icon: emoji:ðŸš¨
        content: "CRITICAL ALERT: Family Access configuration behind schedule - immediate attention needed"
        color: red_background
      - type: callout
        icon: emoji:âš ï¸
        content: "HIGH PRIORITY: Property appraisals need professional coordination"
        color: orange_background
      - type: callout
        icon: emoji:âœ…
        content: "GOOD NEWS: Financial accounts and legal documents ahead of schedule"
        color: green_background

      - type: heading_2
        content: "Timeline Coordination"
      - type: paragraph
        content: "Cross-database timeline analysis and milestone tracking:"
      - type: bulleted_list_item
        content: "âœ… Week 1-2: Foundation setup completed (ahead of schedule)"
      - type: bulleted_list_item
        content: "ðŸ”µ Week 3-4: Professional coordination phase (on track)"
      - type: bulleted_list_item
        content: "âš¡ Week 5: Family access setup (needs acceleration)"
      - type: bulleted_list_item
        content: "â³ Week 6: Final testing and validation (upcoming)"

      - type: heading_2
        content: "Performance Metrics"
      - type: toggle
        content: "ðŸ“Š Detailed Analytics"
        blocks:
          - type: paragraph
            content: "Comprehensive performance analysis:"
          - type: bulleted_list_item
            content: "Database sync health: 98.5% uptime"
          - type: bulleted_list_item
            content: "Formula calculation accuracy: 99.7%"
          - type: bulleted_list_item
            content: "Cross-database rollup performance: < 2 second update time"
          - type: bulleted_list_item
            content: "User engagement: 87% of family members actively using system"
          - type: bulleted_list_item
            content: "Professional response rate: 92% within 48 hours"

      - type: heading_2
        content: "Forecasting & Projections"
      - type: callout
        icon: emoji:ðŸ”®
        content: "Projected completion: Day 28 (85% confidence) | Critical path: Family coordination phase"
        color: blue_background